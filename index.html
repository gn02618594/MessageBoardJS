<!DOCTYPE html>

<html>

<head>
	<style>
	</style>
</head>

<body>
	<h1>留言板</h1>
	<div>
		<p>留言區</p>
		<input type="text" id="msg" size="40">
		<input type="button" id="btn" value="儲存">
	</div>
	<div>
		<p>顯示留言</p>
		<div id="msg_c">
		</div>
	</div>
</body>
<script>
	const showmessage = [];
	let messageDetailIndex=0;
	function savetest() {
		const oMsg = document.querySelector("#msg");
		const oBtn = document.querySelector("#btn");
		const oMsg_c = document.querySelector("#msg_c");
		const oUl = document.createElement("div");
		oMsg_c.appendChild(oUl);
		const sVal = oMsg.value;
		const dBtnDelete=document.createElement('button');
		dBtnDelete.textContent='刪除';
		dBtnDelete.id="Delete"+messageDetailIndex;
		const dBtnEdit=document.createElement('button');
		dBtnEdit.textContent='編輯';
		dBtnEdit.id="Edit"+messageDetailIndex;
		dBtnEdit.addEventListener('click',() => {
			oMsg.value=dBtnEdit.parentNode.querySelector("a").innerText;
		})
		const messageDetail={
			no:messageDetailIndex,
			name:"test",
			message:sVal,
			Deleteid:dBtnDelete.id,
			enditid:dBtnEdit.id
		}
		messageDetailIndex++;
		showmessage.push(messageDetail);
		dBtnDelete.addEventListener('click',() => {
			const dBtnParent =dBtnDelete.parentNode;			
			showmessage.splice(dBtnDelete.id.substr(6),1);
			dBtnParent.remove();
		})
		const content=document.createElement('a');
		content.textContent=sVal;
		oUl.appendChild(content);
		oUl.appendChild(dBtnDelete);
		oUl.appendChild(dBtnEdit);
		oMsg.value = '';
	}
	document.querySelector("#btn").addEventListener('click', savetest);
			
	
	debugger;		
</script>

</html>